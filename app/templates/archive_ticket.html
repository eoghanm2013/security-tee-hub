{% extends "base.html" %}
{% block title %}{{ key }} - Archive - TEE Hub{% endblock %}

{% block content %}
<div class="animate-in">
    <!-- Sticky Header -->
    <div class="sticky top-0 z-10 bg-dd-bg/80 backdrop-blur-lg border-b border-dd-border">
        <div class="max-w-5xl mx-auto px-8 py-3">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-2 text-sm">
                    <a href="/archive" class="text-dd-text-dim hover:text-dd-text-muted transition-colors">Archive</a>
                    <svg class="w-3.5 h-3.5 text-dd-text-dim" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    <a href="/archive" class="text-dd-text-dim hover:text-dd-text-muted transition-colors">{{ month }}</a>
                    <svg class="w-3.5 h-3.5 text-dd-text-dim" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                    <span class="text-white font-mono font-semibold">{{ key }}</span>
                    {% if product_area and product_area != 'other' %}
                    <span class="ml-1 text-[10px] font-semibold px-2 py-0.5 rounded-full
                        {% if product_area == 'siem' %}bg-purple-500/15 text-purple-400 border border-purple-500/20
                        {% elif product_area == 'aap' %}bg-blue-500/15 text-blue-400 border border-blue-500/20
                        {% elif product_area == 'workload_protection' %}bg-amber-500/15 text-amber-400 border border-amber-500/20
                        {% elif product_area == 'cspm' %}bg-emerald-500/15 text-emerald-400 border border-emerald-500/20
                        {% elif product_area == 'vm' %}bg-pink-500/15 text-pink-400 border border-pink-500/20
                        {% elif product_area == 'ciem' %}bg-teal-500/15 text-teal-400 border border-teal-500/20
                        {% elif product_area == 'sast' %}bg-sky-500/15 text-sky-400 border border-sky-500/20
                        {% elif product_area == 'sca' %}bg-indigo-500/15 text-indigo-400 border border-indigo-500/20
                        {% elif product_area == 'iast' %}bg-violet-500/15 text-violet-400 border border-violet-500/20
                        {% endif %}">{{ area_label }}</span>
                    {% endif %}
                </div>
                <a href="https://datadoghq.atlassian.net/browse/{{ key }}" target="_blank"
                   class="inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-dd-text-muted hover:text-white bg-dd-surface-2 hover:bg-dd-surface-3 border border-dd-border rounded-lg transition-colors">
                    <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/></svg>
                    Open in JIRA
                </a>
            </div>
        </div>
    </div>

    <div class="max-w-5xl mx-auto px-8 py-6">
        <div class="card p-0 overflow-hidden">
            <div class="flex items-center justify-between px-6 py-3 border-b border-dd-border bg-dd-surface-2/30">
                <span class="text-xs text-dd-text-dim font-mono">{{ ticket.path }}</span>
                <span class="text-xs text-dd-text-dim">{{ ticket.modified.strftime('%b %d, %Y') }}</span>
            </div>
            <div class="px-8 py-6">
                <div class="md-content max-w-none">{{ ticket.html|safe }}</div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
